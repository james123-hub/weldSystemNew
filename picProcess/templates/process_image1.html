<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
    const contrastInput = document.getElementById('contrast');
    const originalImg = document.getElementById('original-img');
    const processedImg = document.getElementById('processed-img');

    contrastInput.addEventListener('input', function() {
        const contrast = contrastInput.value;
        processedImg.style.filter = `contrast(${contrast})`;
    });

    const imageForm = document.querySelector('form');
    imageForm.addEventListener('submit', function(e) {
        e.preventDefault();

        const imageFile = document.querySelector('[name="image"]').files[0];
        const formData = new FormData();
        formData.append('image', imageFile);

        fetch('{% url 'process_image' %}', {
            method: 'POST',
            body: formData,
            headers: { 'X-CSRFToken': '{{ csrf_token }}' },
        })
        .then(response => response.json())
        .then(data => {
            originalImg.src = data.original_path;
            processedImg.src = data.processed_path;
            contrastInput.disabled = false;
        })
        .catch(error => console.error('上传图片出错：', error));
    });
</script>
</head>
<body>
    <form method="post" action="{% url 'process_image' %}" enctype="multipart/form-data">
    {% csrf_token %}
    <input type="file" name="image" accept="image/*" required>
    <button type="submit">上传图片</button>
    </form>

    <div id="image-wrapper">
        <div class="image-container">
            <img id="original-img" src="" alt="Original Image">
        </div>

     <div class="image-container">
        <img id="processed-img" src="" alt="Processed Image">
    </div>
    </div>

    <input type="range" id="contrast" name="contrast" min="0" max="2" step="0.1" value="1" disabled>

</body>
</html>